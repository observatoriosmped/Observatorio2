import { __assign, __awaiter, __decorate, __generator, __param } from "tslib";
import { ChangeDetectionStrategy, Component, EventEmitter, Inject, Input, Output } from '@angular/core';
import { dismissOnDestroyToken, fireOnInitToken } from './di';
import { SweetAlert2LoaderService } from './sweetalert2-loader.service';
/**
 * <swal> component. See the README.md for usage.
 *
 * It contains a bunch of @Inputs that have a perfect 1:1 mapping with SweetAlert2 options.
 * Their types are directly coming from SweetAlert2 types defintitions, meaning that ngx-sweetalert2 is tightly coupled
 * to SweetAlert2, but also is type-safe.
 *
 * (?) If you want to use an object that declares the SweetAlert2 options all at once rather than many @Inputs,
 *     take a look at [swalOptions], that lets you pass a full {@link SweetAlertOptions} object.
 *
 * (?) If you are reading the TypeScript source of this component, you may think that it's a lot of code.
 *     Be sure that a lot of this code is types and Angular boilerplate. Compiled and minified code is much smaller.
 *     If you are really concerned about performance and/or don't care about the API and its convenient integration
 *     with Angular (notably change detection and transclusion), you may totally use SweetAlert2 natively as well ;)
 *
 * /!\ Some SweetAlert options aren't @Inputs but @Outputs: onBeforeOpen, onOpen, onClose, onAfterClose and onDestroy
 *     (but without "on*" prefix to respect community standards).
 *     However, preConfirm and inputValidator are still @Inputs because there are not event handlers, there can't be
 *     multiple listeners and we need the values they can/must return.
 */
import * as Éµngcc0 from '@angular/core';
var SwalComponent = /** @class */ (function () {
    function SwalComponent(sweetAlert2Loader, moduleLevelFireOnInit, moduleLevelDismissOnDestroy) {
        this.sweetAlert2Loader = sweetAlert2Loader;
        this.moduleLevelFireOnInit = moduleLevelFireOnInit;
        this.moduleLevelDismissOnDestroy = moduleLevelDismissOnDestroy;
        /**
         * Emits an event when the modal DOM element has been created.
         * Useful to perform DOM mutations before the modal is shown.
         */
        this.beforeOpen = new EventEmitter();
        /**
         * Emits an event when the modal is shown.
         */
        this.open = new EventEmitter();
        /**
         * Emits an event when the modal DOM is rendered.
         */
        this.render = new EventEmitter();
        /**
         * Emits an event when the modal will be closed.
         * If you just want to know when the user dismissed the modal, prefer the higher-level (cancel) output.
         */
        this.close = new EventEmitter();
        /**
         * Emits an event after the modal had been closed.
         * If you just want to know when the user dismissed the modal, prefer the higher-level (cancel) output.
         */
        this.afterClose = new EventEmitter();
        /**
         * Emits an event after the modal had been closed.
         * The difference between {@link destroy} and {@link afterClose} is that the latter is called for user interactions
         * only (clicks), whereas {@link destroy} is always called, both for user interactions and popup being closed by
         * another popup.
         */
        this.destroy = new EventEmitter();
        /**
         * Emits when the user clicks "Confirm".
         * Bears a value when using "input", resolved "preConfirm", etc.
         *
         * Example:
         *     <swal (confirm)="handleConfirm($event)"></swal>
         *
         *     public handleConfirm(email: string): void {
         *         // ... save user email
         *     }
         */
        this.confirm = new EventEmitter();
        /**
         * Emits when the user clicks "Cancel", or dismisses the modal by any other allowed way.
         * By default, it will emit a string representing the reason for which the SweetAlert has been closed.
         * The reason is `undefined` when {@link dismiss} is called.
         *
         * Example:
         *     <swal (cancel)="handleCancel($event)"></swal>
         *
         *     public handleCancel(reason: DismissReason | undefined): void {
         *         // reason can be 'cancel', 'overlay', 'close', 'timer' or undefined.
         *         // ... do something
         *     }
         */
        this.cancel = new EventEmitter();
        /**
         * This Set retains the properties that have been changed from @Inputs, so we can know precisely
         * what options we have to send to {@link Swal.fire}.
         */
        this.touchedProps = new Set();
        /**
         * A function of signature `(propName: string): void` that adds a given property name to the list of
         * touched properties, ie. {@link touchedProps}.
         */
        this.markTouched = this.touchedProps.add.bind(this.touchedProps);
        /**
         * Is the SweetAlert2 modal represented by this component currently opened?
         */
        this.isCurrentlyShown = false;
    }
    Object.defineProperty(SwalComponent.prototype, "swalOptions", {
        /**
         * Computes the options object that will get passed to SweetAlert2.
         * Only the properties that have been set at least once on this component will be returned.
         * Mostly for internal usage.
         */
        get: function () {
            var _this = this;
            var options = {};
            //=> We will compute the options object based on the option keys that are known to have changed.
            //   That avoids passing a gigantic object to SweetAlert2, making debugging easier and potentially
            //   avoiding side effects.
            this.touchedProps.forEach(function (prop) {
                options[prop] = _this[prop];
            });
            return options;
        },
        /**
         * An object of SweetAlert2 native options, useful if:
         *  - you don't want to use the @Inputs for practical/philosophical reasons ;
         *  - there are missing @Inputs because ngx-sweetalert2 isn't up-to-date with SweetAlert2's latest changes.
         *
         * /!\ Please note that setting this property does NOT erase what has been set before unless you specify the
         *     previous properties you want to erase again.
         *     Ie. setting { title: 'Title' } and then { text: 'Text' } will give { title: 'Title', text: 'Text' }.
         *
         * /!\ Be aware that the options defined in this object will override the @Inputs of the same name.
         */
        set: function (options) {
            //=> Update properties
            Object.assign(this, options);
            //=> Mark changed properties as touched
            var touchedKeys = Object.keys(options);
            touchedKeys.forEach(this.markTouched);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SwalComponent.prototype, "swalVisible", {
        get: function () {
            return this.isCurrentlyShown;
        },
        set: function (visible) {
            visible ? this.fire() : this.dismiss();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Angular lifecycle hook.
     * Asks the SweetAlert2 loader service to preload the SweetAlert2 library, so it begins to be loaded only if there
     * is a <swal> component somewhere, and is probably fully loaded when the modal has to be displayed,
     * causing no delay.
     */
    SwalComponent.prototype.ngOnInit = function () {
        //=> Preload SweetAlert2 library in case this component is activated.
        this.sweetAlert2Loader.preloadSweetAlertLibrary();
    };
    /**
     * Angular lifecycle hook.
     * Fires the modal, if the component or module is configured to do so.
     */
    SwalComponent.prototype.ngAfterViewInit = function () {
        var fireOnInit = this.swalFireOnInit === undefined
            ? this.moduleLevelFireOnInit
            : this.swalFireOnInit;
        fireOnInit && this.fire();
    };
    /**
     * Angular lifecycle hook.
     * Updates the SweetAlert options, and if the modal is opened, asks SweetAlert to render it again.
     */
    SwalComponent.prototype.ngOnChanges = function (changes) {
        //=> For each changed @Input that matches a SweetAlert2 option, mark as touched so we can
        //   send it with the next fire() or update() calls.
        Object.keys(changes)
            //=> If the filtering logic becomes more complex here, we can use Swal.isValidParameter
            .filter(function (prop) { return !prop.startsWith('swal'); })
            .forEach(this.markTouched);
        //=> Eventually trigger re-render if the modal is open.
        void this.update();
    };
    /**
     * Angular lifecycle hook.
     * Closes the SweetAlert when the component is destroyed.
     */
    SwalComponent.prototype.ngOnDestroy = function () {
        //=> Release the modal if the component is destroyed and if that behaviour is not disabled.
        var dismissOnDestroy = this.swalDismissOnDestroy === undefined
            ? this.moduleLevelDismissOnDestroy
            : this.swalDismissOnDestroy;
        dismissOnDestroy && this.dismiss();
    };
    /**
     * Shows the SweetAlert.
     *
     * Returns the SweetAlert2 promise for convenience and use in code behind templates.
     * Otherwise, (confirm)="myHandler($event)" and (cancel)="myHandler($event)" can be used in templates.
     */
    SwalComponent.prototype.fire = function () {
        return __awaiter(this, void 0, void 0, function () {
            var swal, options, result;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.sweetAlert2Loader.swal];
                    case 1:
                        swal = _a.sent();
                        options = __assign(__assign({}, this.swalOptions), { 
                            //=> Handle modal lifecycle events
                            onBeforeOpen: function (modalElement) {
                                _this.beforeOpen.emit({ modalElement: modalElement });
                            }, onOpen: function (modalElement) {
                                _this.isCurrentlyShown = true;
                                _this.open.emit({ modalElement: modalElement });
                            }, onRender: function (modalElement) {
                                _this.render.emit({ modalElement: modalElement });
                            }, onClose: function (modalElement) {
                                _this.isCurrentlyShown = false;
                                _this.close.emit({ modalElement: modalElement });
                            }, onAfterClose: function () {
                                _this.afterClose.emit();
                            }, onDestroy: function () {
                                _this.destroy.emit();
                            } });
                        return [4 /*yield*/, swal.fire(options)];
                    case 2:
                        result = _a.sent();
                        //=> Emit on (confirm) or (cancel)
                        if ('value' in result) {
                            this.confirm.emit(result.value);
                        }
                        else {
                            this.cancel.emit(result.dismiss);
                        }
                        return [2 /*return*/, result];
                }
            });
        });
    };
    /**
     * Closes the modal, if opened.
     *
     * @param result The value that the modal will resolve with, triggering either (confirm) or (cancel).
     *               If the argument is not passed, (dimiss) will emit `undefined`.
     *               See {@link Swal.close}
     */
    SwalComponent.prototype.dismiss = function (result) {
        return __awaiter(this, void 0, void 0, function () {
            var swal;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.isCurrentlyShown)
                            return [2 /*return*/];
                        return [4 /*yield*/, this.sweetAlert2Loader.swal];
                    case 1:
                        swal = _a.sent();
                        swal.close(result);
                        return [2 /*return*/];
                }
            });
        });
    };
    /**
     * Updates SweetAlert2 options while the modal is opened, causing the modal to re-render.
     * If the modal is not opened, the component options will simply be updated and that's it.
     *
     * /!\ Please note that not all SweetAlert2 options are updatable while the modal is opened.
     *
     * @param options
     */
    SwalComponent.prototype.update = function (options) {
        return __awaiter(this, void 0, void 0, function () {
            var swal, allOptions, updatableOptions;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (options) {
                            this.swalOptions = options;
                        }
                        if (!this.isCurrentlyShown)
                            return [2 /*return*/];
                        return [4 /*yield*/, this.sweetAlert2Loader.swal];
                    case 1:
                        swal = _a.sent();
                        allOptions = this.swalOptions;
                        updatableOptions = Object.keys(allOptions)
                            .filter(function (key) { return swal.isUpdatableParameter(key); })
                            .reduce(function (obj, key) {
                            obj[key] = allOptions[key];
                            return obj;
                        }, {});
                        swal.update(updatableOptions);
                        return [2 /*return*/];
                }
            });
        });
    };
    SwalComponent.ctorParameters = function () { return [
        { type: SweetAlert2LoaderService },
        { type: Boolean, decorators: [{ type: Inject, args: [fireOnInitToken,] }] },
        { type: Boolean, decorators: [{ type: Inject, args: [dismissOnDestroyToken,] }] }
    ]; };
    __decorate([
        Input()
    ], SwalComponent.prototype, "title", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "titleText", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "text", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "html", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "footer", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "icon", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "iconHtml", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "backdrop", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "toast", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "target", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "input", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "width", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "padding", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "background", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "position", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "grow", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "showClass", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "hideClass", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "customClass", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "timer", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "timerProgressBar", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "animation", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "heightAuto", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "allowOutsideClick", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "allowEscapeKey", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "allowEnterKey", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "stopKeydownPropagation", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "keydownListenerCapture", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "showConfirmButton", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "showCancelButton", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "confirmButtonText", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "cancelButtonText", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "confirmButtonColor", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "cancelButtonColor", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "confirmButtonAriaLabel", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "cancelButtonAriaLabel", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "buttonsStyling", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "reverseButtons", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "focusConfirm", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "focusCancel", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "showCloseButton", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "closeButtonHtml", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "closeButtonAriaLabel", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "showLoaderOnConfirm", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "preConfirm", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "imageUrl", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "imageWidth", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "imageHeight", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "imageAlt", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "inputPlaceholder", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "inputValue", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "inputOptions", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "inputAutoTrim", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "inputAttributes", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "inputValidator", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "validationMessage", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "progressSteps", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "currentProgressStep", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "progressStepsDistance", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "scrollbarPadding", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "swalOptions", null);
    __decorate([
        Input()
    ], SwalComponent.prototype, "swalFireOnInit", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "swalDismissOnDestroy", void 0);
    __decorate([
        Input()
    ], SwalComponent.prototype, "swalVisible", null);
    __decorate([
        Output()
    ], SwalComponent.prototype, "beforeOpen", void 0);
    __decorate([
        Output()
    ], SwalComponent.prototype, "open", void 0);
    __decorate([
        Output()
    ], SwalComponent.prototype, "render", void 0);
    __decorate([
        Output()
    ], SwalComponent.prototype, "close", void 0);
    __decorate([
        Output()
    ], SwalComponent.prototype, "afterClose", void 0);
    __decorate([
        Output()
    ], SwalComponent.prototype, "destroy", void 0);
    __decorate([
        Output()
    ], SwalComponent.prototype, "confirm", void 0);
    __decorate([
        Output()
    ], SwalComponent.prototype, "cancel", void 0);
    SwalComponent = __decorate([ __param(1, Inject(fireOnInitToken)),
        __param(2, Inject(dismissOnDestroyToken))
    ], SwalComponent);
SwalComponent.Éµfac = function SwalComponent_Factory(t) { return new (t || SwalComponent)(Éµngcc0.ÉµÉµdirectiveInject(SweetAlert2LoaderService), Éµngcc0.ÉµÉµdirectiveInject(fireOnInitToken), Éµngcc0.ÉµÉµdirectiveInject(dismissOnDestroyToken)); };
SwalComponent.Éµcmp = Éµngcc0.ÉµÉµdefineComponent({ type: SwalComponent, selectors: [["swal"]], inputs: { swalOptions: "swalOptions", swalVisible: "swalVisible", title: "title", titleText: "titleText", text: "text", html: "html", footer: "footer", icon: "icon", iconHtml: "iconHtml", backdrop: "backdrop", toast: "toast", target: "target", input: "input", width: "width", padding: "padding", background: "background", position: "position", grow: "grow", showClass: "showClass", hideClass: "hideClass", customClass: "customClass", timer: "timer", timerProgressBar: "timerProgressBar", animation: "animation", heightAuto: "heightAuto", allowOutsideClick: "allowOutsideClick", allowEscapeKey: "allowEscapeKey", allowEnterKey: "allowEnterKey", stopKeydownPropagation: "stopKeydownPropagation", keydownListenerCapture: "keydownListenerCapture", showConfirmButton: "showConfirmButton", showCancelButton: "showCancelButton", confirmButtonText: "confirmButtonText", cancelButtonText: "cancelButtonText", confirmButtonColor: "confirmButtonColor", cancelButtonColor: "cancelButtonColor", confirmButtonAriaLabel: "confirmButtonAriaLabel", cancelButtonAriaLabel: "cancelButtonAriaLabel", buttonsStyling: "buttonsStyling", reverseButtons: "reverseButtons", focusConfirm: "focusConfirm", focusCancel: "focusCancel", showCloseButton: "showCloseButton", closeButtonHtml: "closeButtonHtml", closeButtonAriaLabel: "closeButtonAriaLabel", showLoaderOnConfirm: "showLoaderOnConfirm", preConfirm: "preConfirm", imageUrl: "imageUrl", imageWidth: "imageWidth", imageHeight: "imageHeight", imageAlt: "imageAlt", inputPlaceholder: "inputPlaceholder", inputValue: "inputValue", inputOptions: "inputOptions", inputAutoTrim: "inputAutoTrim", inputAttributes: "inputAttributes", inputValidator: "inputValidator", validationMessage: "validationMessage", progressSteps: "progressSteps", currentProgressStep: "currentProgressStep", progressStepsDistance: "progressStepsDistance", scrollbarPadding: "scrollbarPadding", swalFireOnInit: "swalFireOnInit", swalDismissOnDestroy: "swalDismissOnDestroy" }, outputs: { beforeOpen: "beforeOpen", open: "open", render: "render", close: "close", afterClose: "afterClose", destroy: "destroy", confirm: "confirm", cancel: "cancel" }, features: [Éµngcc0.ÉµÉµNgOnChangesFeature], decls: 0, vars: 0, template: function SwalComponent_Template(rf, ctx) { }, encapsulation: 2, changeDetection: 0 });
/*@__PURE__*/ (function () { Éµngcc0.ÉµsetClassMetadata(SwalComponent, [{
        type: Component,
        args: [{
                // tslint:disable-next-line:component-selector
                selector: 'swal',
                template: '',
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: SweetAlert2LoaderService }, { type: Boolean, decorators: [{
                type: Inject,
                args: [fireOnInitToken]
            }] }, { type: Boolean, decorators: [{
                type: Inject,
                args: [dismissOnDestroyToken]
            }] }]; }, { beforeOpen: [{
            type: Output
        }], open: [{
            type: Output
        }], render: [{
            type: Output
        }], close: [{
            type: Output
        }], afterClose: [{
            type: Output
        }], destroy: [{
            type: Output
        }], confirm: [{
            type: Output
        }], cancel: [{
            type: Output
        }], swalOptions: [{
            type: Input
        }], swalVisible: [{
            type: Input
        }], title: [{
            type: Input
        }], titleText: [{
            type: Input
        }], text: [{
            type: Input
        }], html: [{
            type: Input
        }], footer: [{
            type: Input
        }], icon: [{
            type: Input
        }], iconHtml: [{
            type: Input
        }], backdrop: [{
            type: Input
        }], toast: [{
            type: Input
        }], target: [{
            type: Input
        }], input: [{
            type: Input
        }], width: [{
            type: Input
        }], padding: [{
            type: Input
        }], background: [{
            type: Input
        }], position: [{
            type: Input
        }], grow: [{
            type: Input
        }], showClass: [{
            type: Input
        }], hideClass: [{
            type: Input
        }], customClass: [{
            type: Input
        }], timer: [{
            type: Input
        }], timerProgressBar: [{
            type: Input
        }], animation: [{
            type: Input
        }], heightAuto: [{
            type: Input
        }], allowOutsideClick: [{
            type: Input
        }], allowEscapeKey: [{
            type: Input
        }], allowEnterKey: [{
            type: Input
        }], stopKeydownPropagation: [{
            type: Input
        }], keydownListenerCapture: [{
            type: Input
        }], showConfirmButton: [{
            type: Input
        }], showCancelButton: [{
            type: Input
        }], confirmButtonText: [{
            type: Input
        }], cancelButtonText: [{
            type: Input
        }], confirmButtonColor: [{
            type: Input
        }], cancelButtonColor: [{
            type: Input
        }], confirmButtonAriaLabel: [{
            type: Input
        }], cancelButtonAriaLabel: [{
            type: Input
        }], buttonsStyling: [{
            type: Input
        }], reverseButtons: [{
            type: Input
        }], focusConfirm: [{
            type: Input
        }], focusCancel: [{
            type: Input
        }], showCloseButton: [{
            type: Input
        }], closeButtonHtml: [{
            type: Input
        }], closeButtonAriaLabel: [{
            type: Input
        }], showLoaderOnConfirm: [{
            type: Input
        }], preConfirm: [{
            type: Input
        }], imageUrl: [{
            type: Input
        }], imageWidth: [{
            type: Input
        }], imageHeight: [{
            type: Input
        }], imageAlt: [{
            type: Input
        }], inputPlaceholder: [{
            type: Input
        }], inputValue: [{
            type: Input
        }], inputOptions: [{
            type: Input
        }], inputAutoTrim: [{
            type: Input
        }], inputAttributes: [{
            type: Input
        }], inputValidator: [{
            type: Input
        }], validationMessage: [{
            type: Input
        }], progressSteps: [{
            type: Input
        }], currentProgressStep: [{
            type: Input
        }], progressStepsDistance: [{
            type: Input
        }], scrollbarPadding: [{
            type: Input
        }], swalFireOnInit: [{
            type: Input
        }], swalDismissOnDestroy: [{
            type: Input
        }] }); })();
    return SwalComponent;
}());
export { SwalComponent };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3dhbC5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIm5nOi9Ac3dlZXRhbGVydDIvbmd4LXN3ZWV0YWxlcnQyL2xpYi9zd2FsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUVILHVCQUF1QixFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBZ0MsTUFBTSxFQUN4RyxNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUscUJBQXFCLEVBQUUsZUFBZSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRTlELE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRXhFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBbUJHOztBQU9IO0lBeU5JLHVCQUNxQixpQkFBMkMsRUFDbEIscUJBQThCLEVBQ3hCLDJCQUFvQztRQUZuRSxzQkFBaUIsR0FBakIsaUJBQWlCLENBQTBCO1FBQ2xCLDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBUztRQUN4QixnQ0FBMkIsR0FBM0IsMkJBQTJCLENBQVM7UUE1RnhGOzs7V0FHRztRQUVhLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBMEIsQ0FBQztRQUV4RTs7V0FFRztRQUVhLFNBQUksR0FBRyxJQUFJLFlBQVksRUFBb0IsQ0FBQztRQUU1RDs7V0FFRztRQUVhLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBc0IsQ0FBQztRQUVoRTs7O1dBR0c7UUFFYSxVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQXFCLENBQUM7UUFFOUQ7OztXQUdHO1FBRWEsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFFdEQ7Ozs7O1dBS0c7UUFFYSxZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUVuRDs7Ozs7Ozs7OztXQVVHO1FBRWEsWUFBTyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFbEQ7Ozs7Ozs7Ozs7OztXQVlHO1FBRWEsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFr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UUFEQyxLQUFLLEVBQUU7eURBQ3dCO0lBT2hDO1FBREMsS0FBSyxFQUFFOytEQUM4QjtJQUd0QztRQURDLEtBQUssRUFBRTtvREFHUDtJQVdEO1FBREMsTUFBTSxFQUFFO3FEQUMrRDtJQU14RTtRQURDLE1BQU0sRUFBRTsrQ0FDbUQ7SUFNNUQ7UUFEQyxNQUFNLEVBQUU7aURBQ3VEO0lBT2hFO1FBREMsTUFBTSxFQUFFO2dEQUNxRDtJQU85RDtRQURDLE1BQU0sRUFBRTtxREFDNkM7SUFTdEQ7UUFEQyxNQUFNLEVBQUU7a0RBQzBDO0lBY25EO1FBREMsTUFBTSxFQUFFO2tEQUN5QztJQWdCbEQ7UUFEQyxNQUFNLEVBQUU7aURBQ21FO0lBdE1uRSxhQUFhLGVBQWUsU0FOeEMsU0FBUyxDQUFDLGNBQ1AsakNBS0ksQ0EyTkMsV0FBQSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUE7eUNBaE9rQixqQ0FpT3pDLFdBQUEsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUE7SUFoT2xDLFFBQVEsRUFBRSxNQUFNLGJBSVAsYUFBYSxDQThXekI7V0FqWEcsUUFBUSxFQUFFLEVBQUUsY0FDWixlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTSxVQUNsRCxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQWdYRjtJQURBLG9CQUFDO0NBQUEsQUE5V0QsSUE4V0M7U0E5V1ksYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQWZ0ZXJWaWV3SW5pdCxcbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5wdXQsIE9uQ2hhbmdlcywgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgU2ltcGxlQ2hhbmdlc1xufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCBTd2FsLCB7IFN3ZWV0QWxlcnRPcHRpb25zLCBTd2VldEFsZXJ0UmVzdWx0IH0gZnJvbSAnc3dlZXRhbGVydDInO1xuaW1wb3J0IHsgZGlzbWlzc09uRGVzdHJveVRva2VuLCBmaXJlT25Jbml0VG9rZW4gfSBmcm9tICcuL2RpJztcbmltcG9ydCAqIGFzIGV2ZW50cyBmcm9tICcuL3N3YWwtZXZlbnRzJztcbmltcG9ydCB7IFN3ZWV0QWxlcnQyTG9hZGVyU2VydmljZSB9IGZyb20gJy4vc3dlZXRhbGVydDItbG9hZGVyLnNlcnZpY2UnO1xuXG4vKipcbiAqIDxzd2FsPiBjb21wb25lbnQuIFNlZSB0aGUgUkVBRE1FLm1kIGZvciB1c2FnZS5cbiAqXG4gKiBJdCBjb250YWlucyBhIGJ1bmNoIG9mIEBJbnB1dHMgdGhhdCBoYXZlIGEgcGVyZmVjdCAxOjEgbWFwcGluZyB3aXRoIFN3ZWV0QWxlcnQyIG9wdGlvbnMuXG4gKiBUaGVpciB0eXBlcyBhcmUgZGlyZWN0bHkgY29taW5nIGZyb20gU3dlZXRBbGVydDIgdHlwZXMgZGVmaW50aXRpb25zLCBtZWFuaW5nIHRoYXQgbmd4LXN3ZWV0YWxlcnQyIGlzIHRpZ2h0bHkgY291cGxlZFxuICogdG8gU3dlZXRBbGVydDIsIGJ1dCBhbHNvIGlzIHR5cGUtc2FmZS5cbiAqXG4gKiAoPykgSWYgeW91IHdhbnQgdG8gdXNlIGFuIG9iamVjdCB0aGF0IGRlY2xhcmVzIHRoZSBTd2VldEFsZXJ0MiBvcHRpb25zIGFsbCBhdCBvbmNlIHJhdGhlciB0aGFuIG1hbnkgQElucHV0cyxcbiAqICAgICB0YWtlIGEgbG9vayBhdCBbc3dhbE9wdGlvbnNdLCB0aGF0IGxldHMgeW91IHBhc3MgYSBmdWxsIHtAbGluayBTd2VldEFsZXJ0T3B0aW9uc30gb2JqZWN0LlxuICpcbiAqICg/KSBJZiB5b3UgYXJlIHJlYWRpbmcgdGhlIFR5cGVTY3JpcHQgc291cmNlIG9mIHRoaXMgY29tcG9uZW50LCB5b3UgbWF5IHRoaW5rIHRoYXQgaXQncyBhIGxvdCBvZiBjb2RlLlxuICogICAgIEJlIHN1cmUgdGhhdCBhIGxvdCBvZiB0aGlzIGNvZGUgaXMgdHlwZXMgYW5kIEFuZ3VsYXIgYm9pbGVycGxhdGUuIENvbXBpbGVkIGFuZCBtaW5pZmllZCBjb2RlIGlzIG11Y2ggc21hbGxlci5cbiAqICAgICBJZiB5b3UgYXJlIHJlYWxseSBjb25jZXJuZWQgYWJvdXQgcGVyZm9ybWFuY2UgYW5kL29yIGRvbid0IGNhcmUgYWJvdXQgdGhlIEFQSSBhbmQgaXRzIGNvbnZlbmllbnQgaW50ZWdyYXRpb25cbiAqICAgICB3aXRoIEFuZ3VsYXIgKG5vdGFibHkgY2hhbmdlIGRldGVjdGlvbiBhbmQgdHJhbnNjbHVzaW9uKSwgeW91IG1heSB0b3RhbGx5IHVzZSBTd2VldEFsZXJ0MiBuYXRpdmVseSBhcyB3ZWxsIDspXG4gKlxuICogLyFcXCBTb21lIFN3ZWV0QWxlcnQgb3B0aW9ucyBhcmVuJ3QgQElucHV0cyBidXQgQE91dHB1dHM6IG9uQmVmb3JlT3Blbiwgb25PcGVuLCBvbkNsb3NlLCBvbkFmdGVyQ2xvc2UgYW5kIG9uRGVzdHJveVxuICogICAgIChidXQgd2l0aG91dCBcIm9uKlwiIHByZWZpeCB0byByZXNwZWN0IGNvbW11bml0eSBzdGFuZGFyZHMpLlxuICogICAgIEhvd2V2ZXIsIHByZUNvbmZpcm0gYW5kIGlucHV0VmFsaWRhdG9yIGFyZSBzdGlsbCBASW5wdXRzIGJlY2F1c2UgdGhlcmUgYXJlIG5vdCBldmVudCBoYW5kbGVycywgdGhlcmUgY2FuJ3QgYmVcbiAqICAgICBtdWx0aXBsZSBsaXN0ZW5lcnMgYW5kIHdlIG5lZWQgdGhlIHZhbHVlcyB0aGV5IGNhbi9tdXN0IHJldHVybi5cbiAqL1xuQENvbXBvbmVudCh7XG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1zZWxlY3RvclxuICAgIHNlbGVjdG9yOiAnc3dhbCcsXG4gICAgdGVtcGxhdGU6ICcnLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG59KVxuZXhwb3J0IGNsYXNzIFN3YWxDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgICBASW5wdXQoKSBwdWJsaWMgdGl0bGU6IFN3ZWV0QWxlcnRPcHRpb25zWyd0aXRsZSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyB0aXRsZVRleHQ6IFN3ZWV0QWxlcnRPcHRpb25zWyd0aXRsZVRleHQnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgdGV4dDogU3dlZXRBbGVydE9wdGlvbnNbJ3RleHQnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaHRtbDogU3dlZXRBbGVydE9wdGlvbnNbJ2h0bWwnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgZm9vdGVyOiBTd2VldEFsZXJ0T3B0aW9uc1snZm9vdGVyJ107XG4gICAgQElucHV0KCkgcHVibGljIGljb246IFN3ZWV0QWxlcnRPcHRpb25zWydpY29uJ107XG4gICAgQElucHV0KCkgcHVibGljIGljb25IdG1sOiBTd2VldEFsZXJ0T3B0aW9uc1snaWNvbkh0bWwnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgYmFja2Ryb3A6IFN3ZWV0QWxlcnRPcHRpb25zWydiYWNrZHJvcCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyB0b2FzdDogU3dlZXRBbGVydE9wdGlvbnNbJ3RvYXN0J107XG4gICAgQElucHV0KCkgcHVibGljIHRhcmdldDogU3dlZXRBbGVydE9wdGlvbnNbJ3RhcmdldCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbnB1dDogU3dlZXRBbGVydE9wdGlvbnNbJ2lucHV0J107XG4gICAgQElucHV0KCkgcHVibGljIHdpZHRoOiBTd2VldEFsZXJ0T3B0aW9uc1snd2lkdGgnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgcGFkZGluZzogU3dlZXRBbGVydE9wdGlvbnNbJ3BhZGRpbmcnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgYmFja2dyb3VuZDogU3dlZXRBbGVydE9wdGlvbnNbJ2JhY2tncm91bmQnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgcG9zaXRpb246IFN3ZWV0QWxlcnRPcHRpb25zWydwb3NpdGlvbiddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBncm93OiBTd2VldEFsZXJ0T3B0aW9uc1snZ3JvdyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBzaG93Q2xhc3M6IFN3ZWV0QWxlcnRPcHRpb25zWydzaG93Q2xhc3MnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaGlkZUNsYXNzOiBTd2VldEFsZXJ0T3B0aW9uc1snaGlkZUNsYXNzJ107XG4gICAgQElucHV0KCkgcHVibGljIGN1c3RvbUNsYXNzOiBTd2VldEFsZXJ0T3B0aW9uc1snY3VzdG9tQ2xhc3MnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgdGltZXI6IFN3ZWV0QWxlcnRPcHRpb25zWyd0aW1lciddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyB0aW1lclByb2dyZXNzQmFyOiBTd2VldEFsZXJ0T3B0aW9uc1sndGltZXJQcm9ncmVzc0JhciddO1xuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2Ugc2hvd0NsYXNzIGFuZCBoaWRlQ2xhc3MgaW5zdGVhZCAqL1xuICAgIEBJbnB1dCgpIHB1YmxpYyBhbmltYXRpb246IFN3ZWV0QWxlcnRPcHRpb25zWydhbmltYXRpb24nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaGVpZ2h0QXV0bzogU3dlZXRBbGVydE9wdGlvbnNbJ2hlaWdodEF1dG8nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgYWxsb3dPdXRzaWRlQ2xpY2s6IFN3ZWV0QWxlcnRPcHRpb25zWydhbGxvd091dHNpZGVDbGljayddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBhbGxvd0VzY2FwZUtleTogU3dlZXRBbGVydE9wdGlvbnNbJ2FsbG93RXNjYXBlS2V5J107XG4gICAgQElucHV0KCkgcHVibGljIGFsbG93RW50ZXJLZXk6IFN3ZWV0QWxlcnRPcHRpb25zWydhbGxvd0VudGVyS2V5J107XG4gICAgQElucHV0KCkgcHVibGljIHN0b3BLZXlkb3duUHJvcGFnYXRpb246IFN3ZWV0QWxlcnRPcHRpb25zWydzdG9wS2V5ZG93blByb3BhZ2F0aW9uJ107XG4gICAgQElucHV0KCkgcHVibGljIGtleWRvd25MaXN0ZW5lckNhcHR1cmU6IFN3ZWV0QWxlcnRPcHRpb25zWydrZXlkb3duTGlzdGVuZXJDYXB0dXJlJ107XG4gICAgQElucHV0KCkgcHVibGljIHNob3dDb25maXJtQnV0dG9uOiBTd2VldEFsZXJ0T3B0aW9uc1snc2hvd0NvbmZpcm1CdXR0b24nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgc2hvd0NhbmNlbEJ1dHRvbjogU3dlZXRBbGVydE9wdGlvbnNbJ3Nob3dDYW5jZWxCdXR0b24nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgY29uZmlybUJ1dHRvblRleHQ6IFN3ZWV0QWxlcnRPcHRpb25zWydjb25maXJtQnV0dG9uVGV4dCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjYW5jZWxCdXR0b25UZXh0OiBTd2VldEFsZXJ0T3B0aW9uc1snY2FuY2VsQnV0dG9uVGV4dCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjb25maXJtQnV0dG9uQ29sb3I6IFN3ZWV0QWxlcnRPcHRpb25zWydjb25maXJtQnV0dG9uQ29sb3InXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgY2FuY2VsQnV0dG9uQ29sb3I6IFN3ZWV0QWxlcnRPcHRpb25zWydjYW5jZWxCdXR0b25Db2xvciddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjb25maXJtQnV0dG9uQXJpYUxhYmVsOiBTd2VldEFsZXJ0T3B0aW9uc1snY29uZmlybUJ1dHRvbkFyaWFMYWJlbCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjYW5jZWxCdXR0b25BcmlhTGFiZWw6IFN3ZWV0QWxlcnRPcHRpb25zWydjYW5jZWxCdXR0b25BcmlhTGFiZWwnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgYnV0dG9uc1N0eWxpbmc6IFN3ZWV0QWxlcnRPcHRpb25zWydidXR0b25zU3R5bGluZyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyByZXZlcnNlQnV0dG9uczogU3dlZXRBbGVydE9wdGlvbnNbJ3JldmVyc2VCdXR0b25zJ107XG4gICAgQElucHV0KCkgcHVibGljIGZvY3VzQ29uZmlybTogU3dlZXRBbGVydE9wdGlvbnNbJ2ZvY3VzQ29uZmlybSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBmb2N1c0NhbmNlbDogU3dlZXRBbGVydE9wdGlvbnNbJ2ZvY3VzQ2FuY2VsJ107XG4gICAgQElucHV0KCkgcHVibGljIHNob3dDbG9zZUJ1dHRvbjogU3dlZXRBbGVydE9wdGlvbnNbJ3Nob3dDbG9zZUJ1dHRvbiddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjbG9zZUJ1dHRvbkh0bWw6IFN3ZWV0QWxlcnRPcHRpb25zWydjbG9zZUJ1dHRvbkh0bWwnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgY2xvc2VCdXR0b25BcmlhTGFiZWw6IFN3ZWV0QWxlcnRPcHRpb25zWydjbG9zZUJ1dHRvbkFyaWFMYWJlbCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBzaG93TG9hZGVyT25Db25maXJtOiBTd2VldEFsZXJ0T3B0aW9uc1snc2hvd0xvYWRlck9uQ29uZmlybSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBwcmVDb25maXJtOiBTd2VldEFsZXJ0T3B0aW9uc1sncHJlQ29uZmlybSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbWFnZVVybDogU3dlZXRBbGVydE9wdGlvbnNbJ2ltYWdlVXJsJ107XG4gICAgQElucHV0KCkgcHVibGljIGltYWdlV2lkdGg6IFN3ZWV0QWxlcnRPcHRpb25zWydpbWFnZVdpZHRoJ107XG4gICAgQElucHV0KCkgcHVibGljIGltYWdlSGVpZ2h0OiBTd2VldEFsZXJ0T3B0aW9uc1snaW1hZ2VIZWlnaHQnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaW1hZ2VBbHQ6IFN3ZWV0QWxlcnRPcHRpb25zWydpbWFnZUFsdCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbnB1dFBsYWNlaG9sZGVyOiBTd2VldEFsZXJ0T3B0aW9uc1snaW5wdXRQbGFjZWhvbGRlciddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbnB1dFZhbHVlOiBTd2VldEFsZXJ0T3B0aW9uc1snaW5wdXRWYWx1ZSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBpbnB1dE9wdGlvbnM6IFN3ZWV0QWxlcnRPcHRpb25zWydpbnB1dE9wdGlvbnMnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaW5wdXRBdXRvVHJpbTogU3dlZXRBbGVydE9wdGlvbnNbJ2lucHV0QXV0b1RyaW0nXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgaW5wdXRBdHRyaWJ1dGVzOiBTd2VldEFsZXJ0T3B0aW9uc1snaW5wdXRBdHRyaWJ1dGVzJ107XG4gICAgQElucHV0KCkgcHVibGljIGlucHV0VmFsaWRhdG9yOiBTd2VldEFsZXJ0T3B0aW9uc1snaW5wdXRWYWxpZGF0b3InXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgdmFsaWRhdGlvbk1lc3NhZ2U6IFN3ZWV0QWxlcnRPcHRpb25zWyd2YWxpZGF0aW9uTWVzc2FnZSddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBwcm9ncmVzc1N0ZXBzOiBTd2VldEFsZXJ0T3B0aW9uc1sncHJvZ3Jlc3NTdGVwcyddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBjdXJyZW50UHJvZ3Jlc3NTdGVwOiBTd2VldEFsZXJ0T3B0aW9uc1snY3VycmVudFByb2dyZXNzU3RlcCddO1xuICAgIEBJbnB1dCgpIHB1YmxpYyBwcm9ncmVzc1N0ZXBzRGlzdGFuY2U6IFN3ZWV0QWxlcnRPcHRpb25zWydwcm9ncmVzc1N0ZXBzRGlzdGFuY2UnXTtcbiAgICBASW5wdXQoKSBwdWJsaWMgc2Nyb2xsYmFyUGFkZGluZzogU3dlZXRBbGVydE9wdGlvbnNbJ3Njcm9sbGJhclBhZGRpbmcnXTtcblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCBvZiBTd2VldEFsZXJ0MiBuYXRpdmUgb3B0aW9ucywgdXNlZnVsIGlmOlxuICAgICAqICAtIHlvdSBkb24ndCB3YW50IHRvIHVzZSB0aGUgQElucHV0cyBmb3IgcHJhY3RpY2FsL3BoaWxvc29waGljYWwgcmVhc29ucyA7XG4gICAgICogIC0gdGhlcmUgYXJlIG1pc3NpbmcgQElucHV0cyBiZWNhdXNlIG5neC1zd2VldGFsZXJ0MiBpc24ndCB1cC10by1kYXRlIHdpdGggU3dlZXRBbGVydDIncyBsYXRlc3QgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIC8hXFwgUGxlYXNlIG5vdGUgdGhhdCBzZXR0aW5nIHRoaXMgcHJvcGVydHkgZG9lcyBOT1QgZXJhc2Ugd2hhdCBoYXMgYmVlbiBzZXQgYmVmb3JlIHVubGVzcyB5b3Ugc3BlY2lmeSB0aGVcbiAgICAgKiAgICAgcHJldmlvdXMgcHJvcGVydGllcyB5b3Ugd2FudCB0byBlcmFzZSBhZ2Fpbi5cbiAgICAgKiAgICAgSWUuIHNldHRpbmcgeyB0aXRsZTogJ1RpdGxlJyB9IGFuZCB0aGVuIHsgdGV4dDogJ1RleHQnIH0gd2lsbCBnaXZlIHsgdGl0bGU6ICdUaXRsZScsIHRleHQ6ICdUZXh0JyB9LlxuICAgICAqXG4gICAgICogLyFcXCBCZSBhd2FyZSB0aGF0IHRoZSBvcHRpb25zIGRlZmluZWQgaW4gdGhpcyBvYmplY3Qgd2lsbCBvdmVycmlkZSB0aGUgQElucHV0cyBvZiB0aGUgc2FtZSBuYW1lLlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIHNldCBzd2FsT3B0aW9ucyhvcHRpb25zOiBTd2VldEFsZXJ0T3B0aW9ucykge1xuICAgICAgICAvLz0+IFVwZGF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgb3B0aW9ucyk7XG5cbiAgICAgICAgLy89PiBNYXJrIGNoYW5nZWQgcHJvcGVydGllcyBhcyB0b3VjaGVkXG4gICAgICAgIGNvbnN0IHRvdWNoZWRLZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucykgYXMgQXJyYXk8a2V5b2YgU3dlZXRBbGVydE9wdGlvbnM+O1xuICAgICAgICB0b3VjaGVkS2V5cy5mb3JFYWNoKHRoaXMubWFya1RvdWNoZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBvcHRpb25zIG9iamVjdCB0aGF0IHdpbGwgZ2V0IHBhc3NlZCB0byBTd2VldEFsZXJ0Mi5cbiAgICAgKiBPbmx5IHRoZSBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBiZWVuIHNldCBhdCBsZWFzdCBvbmNlIG9uIHRoaXMgY29tcG9uZW50IHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogTW9zdGx5IGZvciBpbnRlcm5hbCB1c2FnZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0IHN3YWxPcHRpb25zKCk6IFN3ZWV0QWxlcnRPcHRpb25zIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogeyBbUCBpbiBrZXlvZiBTd2VldEFsZXJ0T3B0aW9uc106IGFueSB9ID0ge307XG5cbiAgICAgICAgLy89PiBXZSB3aWxsIGNvbXB1dGUgdGhlIG9wdGlvbnMgb2JqZWN0IGJhc2VkIG9uIHRoZSBvcHRpb24ga2V5cyB0aGF0IGFyZSBrbm93biB0byBoYXZlIGNoYW5nZWQuXG4gICAgICAgIC8vICAgVGhhdCBhdm9pZHMgcGFzc2luZyBhIGdpZ2FudGljIG9iamVjdCB0byBTd2VldEFsZXJ0MiwgbWFraW5nIGRlYnVnZ2luZyBlYXNpZXIgYW5kIHBvdGVudGlhbGx5XG4gICAgICAgIC8vICAgYXZvaWRpbmcgc2lkZSBlZmZlY3RzLlxuICAgICAgICB0aGlzLnRvdWNoZWRQcm9wcy5mb3JFYWNoKHByb3AgPT4ge1xuICAgICAgICAgICAgb3B0aW9uc1twcm9wXSA9IHRoaXNbcHJvcCBhcyBrZXlvZiB0aGlzXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBmaXJlIHRoZSBtb2RhbCBhcyBzb29uIGFzIHRoZSA8c3dhbD4gY29tcG9uZW50IGlzIGNyZWF0ZWQgYW5kIGluaXRpYWxpemVkIGluIHRoZSB2aWV3LlxuICAgICAqIFdoZW4gbGVmdCB1bmRlZmluZWQgKGRlZmF1bHQpLCB0aGUgdmFsdWUgd2lsbCBiZSBpbmhlcml0ZWQgZnJvbSB0aGUgbW9kdWxlIGNvbmZpZ3VyYXRpb24sIHdoaWNoIGlzIGBmYWxzZWAuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqICAgICA8c3dhbCAqbmdJZj1cImVycm9yXCIgW3RpdGxlXT1cImVycm9yLnRpdGxlXCIgW3RleHRdPVwiZXJyb3IudGV4dFwiIGljb249XCJlcnJvclwiIFtzd2FsRmlyZU9uSW5pdF09XCJ0cnVlXCI+PC9zd2FsPlxuICAgICAqL1xuICAgIEBJbnB1dCgpXG4gICAgcHVibGljIHN3YWxGaXJlT25Jbml0PzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gZGlzbWlzcyB0aGUgbW9kYWwgd2hlbiB0aGUgPHN3YWw+IGNvbXBvbmVudCBpcyBkZXN0cm95ZWQgYnkgQW5ndWxhciAoZm9yIGFueSByZWFzb24pIG9yIG5vdC5cbiAgICAgKiBXaGVuIGxlZnQgdW5kZWZpbmVkIChkZWZhdWx0KSwgdGhlIHZhbHVlIHdpbGwgYmUgaW5oZXJpdGVkIGZyb20gdGhlIG1vZHVsZSBjb25maWd1cmF0aW9uLCB3aGljaCBpcyBgdHJ1ZWAuXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgc3dhbERpc21pc3NPbkRlc3Ryb3k/OiBib29sZWFuO1xuXG4gICAgQElucHV0KClcbiAgICBwdWJsaWMgc2V0IHN3YWxWaXNpYmxlKHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAgICAgdmlzaWJsZSA/IHRoaXMuZmlyZSgpIDogdGhpcy5kaXNtaXNzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBzd2FsVmlzaWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDdXJyZW50bHlTaG93bjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbWl0cyBhbiBldmVudCB3aGVuIHRoZSBtb2RhbCBET00gZWxlbWVudCBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAqIFVzZWZ1bCB0byBwZXJmb3JtIERPTSBtdXRhdGlvbnMgYmVmb3JlIHRoZSBtb2RhbCBpcyBzaG93bi5cbiAgICAgKi9cbiAgICBAT3V0cHV0KClcbiAgICBwdWJsaWMgcmVhZG9ubHkgYmVmb3JlT3BlbiA9IG5ldyBFdmVudEVtaXR0ZXI8ZXZlbnRzLkJlZm9yZU9wZW5FdmVudD4oKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIGV2ZW50IHdoZW4gdGhlIG1vZGFsIGlzIHNob3duLlxuICAgICAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHB1YmxpYyByZWFkb25seSBvcGVuID0gbmV3IEV2ZW50RW1pdHRlcjxldmVudHMuT3BlbkV2ZW50PigpO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHMgYW4gZXZlbnQgd2hlbiB0aGUgbW9kYWwgRE9NIGlzIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHB1YmxpYyByZWFkb25seSByZW5kZXIgPSBuZXcgRXZlbnRFbWl0dGVyPGV2ZW50cy5SZW5kZXJFdmVudD4oKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGFuIGV2ZW50IHdoZW4gdGhlIG1vZGFsIHdpbGwgYmUgY2xvc2VkLlxuICAgICAqIElmIHlvdSBqdXN0IHdhbnQgdG8ga25vdyB3aGVuIHRoZSB1c2VyIGRpc21pc3NlZCB0aGUgbW9kYWwsIHByZWZlciB0aGUgaGlnaGVyLWxldmVsIChjYW5jZWwpIG91dHB1dC5cbiAgICAgKi9cbiAgICBAT3V0cHV0KClcbiAgICBwdWJsaWMgcmVhZG9ubHkgY2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPGV2ZW50cy5DbG9zZUV2ZW50PigpO1xuXG4gICAgLyoqXG4gICAgICogRW1pdHMgYW4gZXZlbnQgYWZ0ZXIgdGhlIG1vZGFsIGhhZCBiZWVuIGNsb3NlZC5cbiAgICAgKiBJZiB5b3UganVzdCB3YW50IHRvIGtub3cgd2hlbiB0aGUgdXNlciBkaXNtaXNzZWQgdGhlIG1vZGFsLCBwcmVmZXIgdGhlIGhpZ2hlci1sZXZlbCAoY2FuY2VsKSBvdXRwdXQuXG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgcHVibGljIHJlYWRvbmx5IGFmdGVyQ2xvc2UgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAgICAvKipcbiAgICAgKiBFbWl0cyBhbiBldmVudCBhZnRlciB0aGUgbW9kYWwgaGFkIGJlZW4gY2xvc2VkLlxuICAgICAqIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4ge0BsaW5rIGRlc3Ryb3l9IGFuZCB7QGxpbmsgYWZ0ZXJDbG9zZX0gaXMgdGhhdCB0aGUgbGF0dGVyIGlzIGNhbGxlZCBmb3IgdXNlciBpbnRlcmFjdGlvbnNcbiAgICAgKiBvbmx5IChjbGlja3MpLCB3aGVyZWFzIHtAbGluayBkZXN0cm95fSBpcyBhbHdheXMgY2FsbGVkLCBib3RoIGZvciB1c2VyIGludGVyYWN0aW9ucyBhbmQgcG9wdXAgYmVpbmcgY2xvc2VkIGJ5XG4gICAgICogYW5vdGhlciBwb3B1cC5cbiAgICAgKi9cbiAgICBAT3V0cHV0KClcbiAgICBwdWJsaWMgcmVhZG9ubHkgZGVzdHJveSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIHdoZW4gdGhlIHVzZXIgY2xpY2tzIFwiQ29uZmlybVwiLlxuICAgICAqIEJlYXJzIGEgdmFsdWUgd2hlbiB1c2luZyBcImlucHV0XCIsIHJlc29sdmVkIFwicHJlQ29uZmlybVwiLCBldGMuXG4gICAgICpcbiAgICAgKiBFeGFtcGxlOlxuICAgICAqICAgICA8c3dhbCAoY29uZmlybSk9XCJoYW5kbGVDb25maXJtKCRldmVudClcIj48L3N3YWw+XG4gICAgICpcbiAgICAgKiAgICAgcHVibGljIGhhbmRsZUNvbmZpcm0oZW1haWw6IHN0cmluZyk6IHZvaWQge1xuICAgICAqICAgICAgICAgLy8gLi4uIHNhdmUgdXNlciBlbWFpbFxuICAgICAqICAgICB9XG4gICAgICovXG4gICAgQE91dHB1dCgpXG4gICAgcHVibGljIHJlYWRvbmx5IGNvbmZpcm0gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIC8qKlxuICAgICAqIEVtaXRzIHdoZW4gdGhlIHVzZXIgY2xpY2tzIFwiQ2FuY2VsXCIsIG9yIGRpc21pc3NlcyB0aGUgbW9kYWwgYnkgYW55IG90aGVyIGFsbG93ZWQgd2F5LlxuICAgICAqIEJ5IGRlZmF1bHQsIGl0IHdpbGwgZW1pdCBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHJlYXNvbiBmb3Igd2hpY2ggdGhlIFN3ZWV0QWxlcnQgaGFzIGJlZW4gY2xvc2VkLlxuICAgICAqIFRoZSByZWFzb24gaXMgYHVuZGVmaW5lZGAgd2hlbiB7QGxpbmsgZGlzbWlzc30gaXMgY2FsbGVkLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKiAgICAgPHN3YWwgKGNhbmNlbCk9XCJoYW5kbGVDYW5jZWwoJGV2ZW50KVwiPjwvc3dhbD5cbiAgICAgKlxuICAgICAqICAgICBwdWJsaWMgaGFuZGxlQ2FuY2VsKHJlYXNvbjogRGlzbWlzc1JlYXNvbiB8IHVuZGVmaW5lZCk6IHZvaWQge1xuICAgICAqICAgICAgICAgLy8gcmVhc29uIGNhbiBiZSAnY2FuY2VsJywgJ292ZXJsYXknLCAnY2xvc2UnLCAndGltZXInIG9yIHVuZGVmaW5lZC5cbiAgICAgKiAgICAgICAgIC8vIC4uLiBkbyBzb21ldGhpbmdcbiAgICAgKiAgICAgfVxuICAgICAqL1xuICAgIEBPdXRwdXQoKVxuICAgIHB1YmxpYyByZWFkb25seSBjYW5jZWwgPSBuZXcgRXZlbnRFbWl0dGVyPFN3YWwuRGlzbWlzc1JlYXNvbiB8IHVuZGVmaW5lZD4oKTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgU2V0IHJldGFpbnMgdGhlIHByb3BlcnRpZXMgdGhhdCBoYXZlIGJlZW4gY2hhbmdlZCBmcm9tIEBJbnB1dHMsIHNvIHdlIGNhbiBrbm93IHByZWNpc2VseVxuICAgICAqIHdoYXQgb3B0aW9ucyB3ZSBoYXZlIHRvIHNlbmQgdG8ge0BsaW5rIFN3YWwuZmlyZX0uXG4gICAgICovXG4gICAgcHJpdmF0ZSByZWFkb25seSB0b3VjaGVkUHJvcHMgPSBuZXcgU2V0PGtleW9mIFN3ZWV0QWxlcnRPcHRpb25zPigpO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiBvZiBzaWduYXR1cmUgYChwcm9wTmFtZTogc3RyaW5nKTogdm9pZGAgdGhhdCBhZGRzIGEgZ2l2ZW4gcHJvcGVydHkgbmFtZSB0byB0aGUgbGlzdCBvZlxuICAgICAqIHRvdWNoZWQgcHJvcGVydGllcywgaWUuIHtAbGluayB0b3VjaGVkUHJvcHN9LlxuICAgICAqL1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbWFya1RvdWNoZWQgPSB0aGlzLnRvdWNoZWRQcm9wcy5hZGQuYmluZCh0aGlzLnRvdWNoZWRQcm9wcyk7XG5cbiAgICAvKipcbiAgICAgKiBJcyB0aGUgU3dlZXRBbGVydDIgbW9kYWwgcmVwcmVzZW50ZWQgYnkgdGhpcyBjb21wb25lbnQgY3VycmVudGx5IG9wZW5lZD9cbiAgICAgKi9cbiAgICBwcml2YXRlIGlzQ3VycmVudGx5U2hvd24gPSBmYWxzZTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzd2VldEFsZXJ0MkxvYWRlcjogU3dlZXRBbGVydDJMb2FkZXJTZXJ2aWNlLFxuICAgICAgICBASW5qZWN0KGZpcmVPbkluaXRUb2tlbikgcHJpdmF0ZSByZWFkb25seSBtb2R1bGVMZXZlbEZpcmVPbkluaXQ6IGJvb2xlYW4sXG4gICAgICAgIEBJbmplY3QoZGlzbWlzc09uRGVzdHJveVRva2VuKSBwcml2YXRlIHJlYWRvbmx5IG1vZHVsZUxldmVsRGlzbWlzc09uRGVzdHJveTogYm9vbGVhbikge1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFuZ3VsYXIgbGlmZWN5Y2xlIGhvb2suXG4gICAgICogQXNrcyB0aGUgU3dlZXRBbGVydDIgbG9hZGVyIHNlcnZpY2UgdG8gcHJlbG9hZCB0aGUgU3dlZXRBbGVydDIgbGlicmFyeSwgc28gaXQgYmVnaW5zIHRvIGJlIGxvYWRlZCBvbmx5IGlmIHRoZXJlXG4gICAgICogaXMgYSA8c3dhbD4gY29tcG9uZW50IHNvbWV3aGVyZSwgYW5kIGlzIHByb2JhYmx5IGZ1bGx5IGxvYWRlZCB3aGVuIHRoZSBtb2RhbCBoYXMgdG8gYmUgZGlzcGxheWVkLFxuICAgICAqIGNhdXNpbmcgbm8gZGVsYXkuXG4gICAgICovXG4gICAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICAvLz0+IFByZWxvYWQgU3dlZXRBbGVydDIgbGlicmFyeSBpbiBjYXNlIHRoaXMgY29tcG9uZW50IGlzIGFjdGl2YXRlZC5cbiAgICAgICAgdGhpcy5zd2VldEFsZXJ0MkxvYWRlci5wcmVsb2FkU3dlZXRBbGVydExpYnJhcnkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbmd1bGFyIGxpZmVjeWNsZSBob29rLlxuICAgICAqIEZpcmVzIHRoZSBtb2RhbCwgaWYgdGhlIGNvbXBvbmVudCBvciBtb2R1bGUgaXMgY29uZmlndXJlZCB0byBkbyBzby5cbiAgICAgKi9cbiAgICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgICAgICBjb25zdCBmaXJlT25Jbml0ID0gdGhpcy5zd2FsRmlyZU9uSW5pdCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRoaXMubW9kdWxlTGV2ZWxGaXJlT25Jbml0XG4gICAgICAgICAgICA6IHRoaXMuc3dhbEZpcmVPbkluaXQ7XG5cbiAgICAgICAgZmlyZU9uSW5pdCAmJiB0aGlzLmZpcmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbmd1bGFyIGxpZmVjeWNsZSBob29rLlxuICAgICAqIFVwZGF0ZXMgdGhlIFN3ZWV0QWxlcnQgb3B0aW9ucywgYW5kIGlmIHRoZSBtb2RhbCBpcyBvcGVuZWQsIGFza3MgU3dlZXRBbGVydCB0byByZW5kZXIgaXQgYWdhaW4uXG4gICAgICovXG4gICAgcHVibGljIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICAgICAgLy89PiBGb3IgZWFjaCBjaGFuZ2VkIEBJbnB1dCB0aGF0IG1hdGNoZXMgYSBTd2VldEFsZXJ0MiBvcHRpb24sIG1hcmsgYXMgdG91Y2hlZCBzbyB3ZSBjYW5cbiAgICAgICAgLy8gICBzZW5kIGl0IHdpdGggdGhlIG5leHQgZmlyZSgpIG9yIHVwZGF0ZSgpIGNhbGxzLlxuICAgICAgICBPYmplY3Qua2V5cyhjaGFuZ2VzKVxuICAgICAgICAgICAgLy89PiBJZiB0aGUgZmlsdGVyaW5nIGxvZ2ljIGJlY29tZXMgbW9yZSBjb21wbGV4IGhlcmUsIHdlIGNhbiB1c2UgU3dhbC5pc1ZhbGlkUGFyYW1ldGVyXG4gICAgICAgICAgICAuZmlsdGVyKChwcm9wKTogcHJvcCBpcyBrZXlvZiBTd2VldEFsZXJ0T3B0aW9ucyA9PiAhcHJvcC5zdGFydHNXaXRoKCdzd2FsJykpXG4gICAgICAgICAgICAuZm9yRWFjaCh0aGlzLm1hcmtUb3VjaGVkKTtcblxuICAgICAgICAvLz0+IEV2ZW50dWFsbHkgdHJpZ2dlciByZS1yZW5kZXIgaWYgdGhlIG1vZGFsIGlzIG9wZW4uXG4gICAgICAgIHZvaWQgdGhpcy51cGRhdGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbmd1bGFyIGxpZmVjeWNsZSBob29rLlxuICAgICAqIENsb3NlcyB0aGUgU3dlZXRBbGVydCB3aGVuIHRoZSBjb21wb25lbnQgaXMgZGVzdHJveWVkLlxuICAgICAqL1xuICAgIHB1YmxpYyBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgLy89PiBSZWxlYXNlIHRoZSBtb2RhbCBpZiB0aGUgY29tcG9uZW50IGlzIGRlc3Ryb3llZCBhbmQgaWYgdGhhdCBiZWhhdmlvdXIgaXMgbm90IGRpc2FibGVkLlxuICAgICAgICBjb25zdCBkaXNtaXNzT25EZXN0cm95ID0gdGhpcy5zd2FsRGlzbWlzc09uRGVzdHJveSA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IHRoaXMubW9kdWxlTGV2ZWxEaXNtaXNzT25EZXN0cm95XG4gICAgICAgICAgICA6IHRoaXMuc3dhbERpc21pc3NPbkRlc3Ryb3k7XG5cbiAgICAgICAgZGlzbWlzc09uRGVzdHJveSAmJiB0aGlzLmRpc21pc3MoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTaG93cyB0aGUgU3dlZXRBbGVydC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIFN3ZWV0QWxlcnQyIHByb21pc2UgZm9yIGNvbnZlbmllbmNlIGFuZCB1c2UgaW4gY29kZSBiZWhpbmQgdGVtcGxhdGVzLlxuICAgICAqIE90aGVyd2lzZSwgKGNvbmZpcm0pPVwibXlIYW5kbGVyKCRldmVudClcIiBhbmQgKGNhbmNlbCk9XCJteUhhbmRsZXIoJGV2ZW50KVwiIGNhbiBiZSB1c2VkIGluIHRlbXBsYXRlcy5cbiAgICAgKi9cbiAgICBwdWJsaWMgYXN5bmMgZmlyZSgpOiBQcm9taXNlPFN3ZWV0QWxlcnRSZXN1bHQ+IHtcbiAgICAgICAgY29uc3Qgc3dhbCA9IGF3YWl0IHRoaXMuc3dlZXRBbGVydDJMb2FkZXIuc3dhbDtcblxuICAgICAgICAvLz0+IEJ1aWxkIHRoZSBTd2VldEFsZXJ0MiBvcHRpb25zXG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IFN3ZWV0QWxlcnRPcHRpb25zID0ge1xuICAgICAgICAgICAgLy89PiBNZXJnZSB3aXRoIGNhbGN1bGF0ZWQgb3B0aW9ucyBzZXQgZm9yIHRoYXQgc3BlY2lmaWMgc3dhbFxuICAgICAgICAgICAgLi4udGhpcy5zd2FsT3B0aW9ucyxcblxuICAgICAgICAgICAgLy89PiBIYW5kbGUgbW9kYWwgbGlmZWN5Y2xlIGV2ZW50c1xuICAgICAgICAgICAgb25CZWZvcmVPcGVuOiAobW9kYWxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5iZWZvcmVPcGVuLmVtaXQoeyBtb2RhbEVsZW1lbnQgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25PcGVuOiAobW9kYWxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0N1cnJlbnRseVNob3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4uZW1pdCh7IG1vZGFsRWxlbWVudCB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlbmRlcjogKG1vZGFsRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyLmVtaXQoeyBtb2RhbEVsZW1lbnQgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25DbG9zZTogKG1vZGFsRWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNDdXJyZW50bHlTaG93biA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UuZW1pdCh7IG1vZGFsRWxlbWVudCB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyQ2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFmdGVyQ2xvc2UuZW1pdCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRGVzdHJveTogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveS5lbWl0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy89PiBTaG93IHRoZSBTd2FsISBBbmQgd2FpdCBmb3IgY29uZmlybWF0aW9uIG9yIGRpbWlzc2FsLlxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzd2FsLmZpcmUob3B0aW9ucyk7XG5cbiAgICAgICAgLy89PiBFbWl0IG9uIChjb25maXJtKSBvciAoY2FuY2VsKVxuICAgICAgICBpZiAoJ3ZhbHVlJyBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlybS5lbWl0KHJlc3VsdC52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbC5lbWl0KHJlc3VsdC5kaXNtaXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBtb2RhbCwgaWYgb3BlbmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmFsdWUgdGhhdCB0aGUgbW9kYWwgd2lsbCByZXNvbHZlIHdpdGgsIHRyaWdnZXJpbmcgZWl0aGVyIChjb25maXJtKSBvciAoY2FuY2VsKS5cbiAgICAgKiAgICAgICAgICAgICAgIElmIHRoZSBhcmd1bWVudCBpcyBub3QgcGFzc2VkLCAoZGltaXNzKSB3aWxsIGVtaXQgYHVuZGVmaW5lZGAuXG4gICAgICogICAgICAgICAgICAgICBTZWUge0BsaW5rIFN3YWwuY2xvc2V9XG4gICAgICovXG4gICAgcHVibGljIGFzeW5jIGRpc21pc3MocmVzdWx0PzogU3dlZXRBbGVydFJlc3VsdCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNDdXJyZW50bHlTaG93bikgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHN3YWwgPSBhd2FpdCB0aGlzLnN3ZWV0QWxlcnQyTG9hZGVyLnN3YWw7XG4gICAgICAgIHN3YWwuY2xvc2UocmVzdWx0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIFN3ZWV0QWxlcnQyIG9wdGlvbnMgd2hpbGUgdGhlIG1vZGFsIGlzIG9wZW5lZCwgY2F1c2luZyB0aGUgbW9kYWwgdG8gcmUtcmVuZGVyLlxuICAgICAqIElmIHRoZSBtb2RhbCBpcyBub3Qgb3BlbmVkLCB0aGUgY29tcG9uZW50IG9wdGlvbnMgd2lsbCBzaW1wbHkgYmUgdXBkYXRlZCBhbmQgdGhhdCdzIGl0LlxuICAgICAqXG4gICAgICogLyFcXCBQbGVhc2Ugbm90ZSB0aGF0IG5vdCBhbGwgU3dlZXRBbGVydDIgb3B0aW9ucyBhcmUgdXBkYXRhYmxlIHdoaWxlIHRoZSBtb2RhbCBpcyBvcGVuZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyB1cGRhdGUob3B0aW9ucz86IFN3ZWV0QWxlcnRPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnN3YWxPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5pc0N1cnJlbnRseVNob3duKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgc3dhbCA9IGF3YWl0IHRoaXMuc3dlZXRBbGVydDJMb2FkZXIuc3dhbDtcbiAgICAgICAgY29uc3QgYWxsT3B0aW9ucyA9IHRoaXMuc3dhbE9wdGlvbnM7XG5cbiAgICAgICAgY29uc3QgdXBkYXRhYmxlT3B0aW9ucyA9IE9iamVjdC5rZXlzKGFsbE9wdGlvbnMpXG4gICAgICAgICAgICAuZmlsdGVyKChrZXkpOiBrZXkgaXMga2V5b2YgU3dlZXRBbGVydE9wdGlvbnMgPT4gc3dhbC5pc1VwZGF0YWJsZVBhcmFtZXRlcihrZXkpKVxuICAgICAgICAgICAgLnJlZHVjZSgob2JqLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICBvYmpba2V5XSA9IGFsbE9wdGlvbnNba2V5XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfSwge30gYXMgeyBbUCBpbiBrZXlvZiBTd2VldEFsZXJ0T3B0aW9uc106IGFueSB9KTtcblxuICAgICAgICBzd2FsLnVwZGF0ZSh1cGRhdGFibGVPcHRpb25zKTtcbiAgICB9XG59XG4iXX0=